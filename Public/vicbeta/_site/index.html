<!DOCTYPE HTML>
<html>
<head>
    <meta charset="UTF-8">
    <title>Vic' Blog</title>
    <link rel="stylesheet" href="/themes/vdouban/style.css" />
</head>
<body>
    <div class="wrap clearfix">
        <div class="header clearfix">
            <a href="javascript:void(0);" class="logo">vic</a>
            <p class="desc">要小清新，不要技术宅</p>
            <ul class="nav clearfix">
            
                <li>
                    <a href="/">首页</a>
                </li>
            
                <li>
                    <a href="/code">扣德</a>
                </li>
            
                <li>
                    <a href="/travel">足迹</a>
                </li>
            
                <li>
                    <a href="/misc">杂谈</a>
                </li>
            
                <li>
                    <a href="/about">关于</a>
                </li>
            
            </ul>
        </div>
        <div class="main">
    
    <div class="article"><h1>上有天堂，下有...嗯痕</h1>

<p>告别珠海的小伙伴们，孤身来到杭州，一直让加班充实着自己，可以忘却掉很多不想去想的东西，说不上是好是坏，但也浑浑噩噩的过来了。这座有着珠海类似节奏的城市，让我没有了突兀的感觉，可期待的归属感又还差了那么一点。</p>

<p>在中国人蠢蠢欲动的假期，终于有机会去以“旅游”的眼光来看待即将生活的地方，正如我的工作一直就像在旅游一样。</p>

<p><img src="http://vicbeta.com/upload/201309202013193129.JPG" alt="西湖"></p>

<p>杭城从西湖开始，到西湖结束。来了这么久一直还没搞清杭州到底是土鳖，还是高端大气，不过有西湖，其实这些都不太重要了。</p>

<p><img src="http://vicbeta.com/upload/201309202012397782.JPG" alt="集贤亭"></p>

<p>信陵君来过么？记得电视剧里他有龙阳之好，呃......</p>

<p><img src="http://vicbeta.com/upload/201309202012274501.JPG" alt="湖中岛"></p>

<p>三潭印月有点小好不好，但是岛上的园艺还不错。</p>

<p><img src="http://vicbeta.com/upload/201309202012556070.JPG" alt="园林"></p>

<p>有点像想象中苏州园林的感觉。</p>

<p><img src="http://vicbeta.com/upload/201309202013046827.JPG" alt="雷峰塔"></p>

<p>小时候一直以为只要是个塔，塔底就有白素贞，导致对德山的塔有着很多遐想。可是真正来了雷峰塔还是没见白素贞，法海你不懂爱。</p>

<p><img src="http://vicbeta.com/upload/201309202013127521.JPG" alt="雷峰塔檐"></p>

<p>不过见过的塔中，这个确实是最大的一个，而且俯瞰西湖挺壮观，游客多也不为过了。好希望这里的天能和北京PM100以下时一样蓝，可总有些水雾或泛白，她走着她自己的轨迹，似乎不能要求太多了。</p>

<p><img src="http://vicbeta.com/upload/201309202013476443.JPG" alt="灵隐寺"></p>

<p>近年去寺庙有点多诶，灵隐，低调的奢华。我没信仰，也不排斥信仰，我不求什么，只求，不求什么。</p>

<p><img src="http://vicbeta.com/upload/201309202013327068.JPG" alt="灵隐寺石柱"></p>

<p>丢～～～</p>

<p><img src="http://vicbeta.com/upload/201309202013563121.JPG" alt="西湖夜景"></p>

<p>这不是花城、没有海风、没有雾霾，有...</p>

<p><img src="http://vicbeta.com/upload/201309202014056220.JPG" alt="西湖秋月"></p>

<p>晚来的月亮，中秋快乐？中秋还行。</p>

<p><img src="http://vicbeta.com/upload/201309202014138779.JPG" alt="昌老板" /></p>

<p>最后谢谢昌老板大老远的过来，不然又得一个人过节了。爆你照～</p>


<blockquote>
    <p>20 Sep 2013</p>
</blockquote></div>
    
    <div class="article"><h1>See U Friends</h1>

<p>老大、老大的老大</p>
<p>都不能理解我为什么这样决定</p>
<p>其实我哪有考虑那么多</p>
<p>当然非常舍不得兄弟们</p>
<p>只是这次</p>
<p>我想自己过得开心点</p>
<p>想做自己想去做的事</p>
<p>仅此而已</p>
<blockquote>
    <p>08 Aug 2013</p>
</blockquote></div>
    
    <div class="article"><h1>Grunt前端发布自动化</h1>

<p>静态项目发布包括静态资源文件的合并、压缩、测试等繁琐流程，发布工作的重复性很高，有时为了方便，可能脚本未经过处理就上线，然而空格回车、长变量名、注释等对于线上环境是毫无意义的，却会浪费大量网络流量。</p>

<p>超过三次以上的重复操作需考虑将其自动化，而Grunt正是自动化前端发布流程的利器。</p>

<p>Grunt由许多小工具组成，如uglify, cssmin, etc. 这些工具能帮你完成特定的任务。但是如果把压缩后的文件都以min扩展命名，那发布后从开发环境切换到正式环境需要更改资源引用的路径，这可能又是一个不小而且容易出错的工作。</p>

<p>如何组织项目目录结构，以便更方便的管理流程自动化，参考seajs的官方示例，可通过在url增加dev标识来区分开发和正式环境。</p>

<pre class="prettyprint linenums">
if (location.href.indexOf('?dev') > 0) {
    var static_path = 'dev/';
} else {
    var static_path = 'online/';
}
</pre>

<p>通过动态加载脚本来加载不同环境的静态资源（css不建议动态加载，避免页面重绘）。</p>

<pre class="prettyprint linenums">
var load_scripts = ['http://libs.baidu.com/jquery/1.9.1/jquery.min.js'];
Loader.load(load_scripts, function() {
    Loader.css(static_path + 'css/reset.css', function() {
        $('body').append('css loaded');
    });
    Loader.js(static_path + 'js/index.js');
});
</pre>

<p>开发源码在dev目录，通过Grunt编译后的文件放在对应的online目录下。目录组织如下：</p>

<pre class="prettyprint linenums">
/spath
    |-- dev [ develop environment ]
    |    |-- css
    |    `-- js
    |-- online [ online environment ]
    |    |-- css
    |    `-- js
    `-- index.html
</pre>

<p>这样通过访问不同url链接来切换开发环境与测试环境，而整个发布流程只需执行grunt即可得到最终外网压缩代码。</p>

<p>PS：本例只考虑代码压缩，合并需另外自己手动配置</p>

<p>spath：<a href="https://github.com/JesonRondo/spath" target="_blank">快到碗里来</a></p>
<blockquote>
    <p>16 Jul 2013</p>
</blockquote></div>
    
</div>
<div class="aside">
    <h5>Level</h5>
    <ul>
        
        <li>
            <a href="/travel/2013/09/20/hz-mid-autumn.html">上有天堂，下有...嗯痕</a>
            <span class="date">20 Sep 2013</span>
        </li>
        
        <li>
            <a href="/misc/2013/08/08/cleanup.html">See U Friends</a>
            <span class="date">08 Aug 2013</span>
        </li>
        
        <li>
            <a href="/code/2013/07/16/spath-by-grunt.html">Grunt前端发布自动化</a>
            <span class="date">16 Jul 2013</span>
        </li>
        
        <li>
            <a href="/code/2013/06/08/ubuntu-goagent-crt.html">goagent 证书导入</a>
            <span class="date">08 Jun 2013</span>
        </li>
        
        <li>
            <a href="/travel/2013/05/25/great-wall.html">慕田峪长城</a>
            <span class="date">25 May 2013</span>
        </li>
        
        <li>
            <a href="/code/2013/05/24/p3p-head.html">P3P解决IE cookie安全问题</a>
            <span class="date">24 May 2013</span>
        </li>
        
        <li>
            <a href="/code/2013/05/17/ubuntu-shut-down-down.html">Ubuntu unity图形重装</a>
            <span class="date">17 May 2013</span>
        </li>
        
        <li>
            <a href="/code/2013/04/24/phone-over-width.html">手机浏览器input撑出body</a>
            <span class="date">24 Apr 2013</span>
        </li>
        
        <li>
            <a href="/misc/2013/04/22/coffee-stomach.html">胃病表乱喝咖啡呀</a>
            <span class="date">22 Apr 2013</span>
        </li>
        
        <li>
            <a href="/code/2013/03/22/ie6-jsonp-hack.html">IE6 JSONP回调执行失败</a>
            <span class="date">22 Mar 2013</span>
        </li>
        
    </ul>
    <h5 class="mt20">Links</h5>
    <div class="linkbox clearfix">
        <a href="http://travisup.com/" title="专注前端30年, kss, fuckphp" target="_blank">Travis</a><a href="http://www.cnblogs.com/Deasel-s-magic-box/" title="热干面" target="_blank">热干面</a><a href="http://www.tntrmid.com/" title="Rolling on the ground like a pig……" target="_blank">TantraMind</a><a href="http://free-will.me/" title="Hack Anything | Hugh's Blog" target="_blank">Hugh</a><a href="http://blog.satikey.com/" title="life for ideas" target="_blank">IDEA</a><a href="http://www.jn47.com/" title="巨牛设计" target="_blank">巨牛设计</a><a href="http://budingge.com/" title="补丁哥请骚烤" target="_blank">补丁哥</a>    </div>
</div>
<ul class="pages clearfix">
    <li class="page">
    
        <span class="current-page">1</span>
    
    </li>
    
    <li class="page">
        
        <a href="/page2">2</a>
        
    </li>
    
    <li class="page">
        
        <a href="/page3">3</a>
        
    </li>
    
    <li class="page">
        
        <a href="/page4">4</a>
        
    </li>
    
    <li class="page">
        
        <a href="/page5">5</a>
        
    </li>
    
    <li class="page">
        
        <a href="/page6">6</a>
        
    </li>
    
    <li class="page">
        
        <a href="/page7">7</a>
        
    </li>
    
    <li class="page">
        
        <a href="/page8">8</a>
        
    </li>
    
</ul>
        <div class="footer">
            LongZhou's Blog&copy;2012 By Vic
        </div>
    </div>
    <script type="text/javascript" src="/js/prettify.js"></script>
    <script type="text/javascript">prettyPrint();</script>
    <script>
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?dcfa320f3848c24822c7ca668c9467b6";
            var s = document.getElementsByTagName("script")[0]; 
            s.parentNode.insertBefore(hm, s);
        })();
    </script>
</body>
</html>
